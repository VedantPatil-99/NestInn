<% layout("/layouts/boilerplate") %>

<div class="container mt-4">
	<h4>Create a New Hostel Listing</h4>
	<form
		action="/hostels"
		method="POST"
		class="needs-validation"
		enctype="multipart/form-data"
		novalidate
		id="multiStepForm"
	>
		<!-- Step 1: Basic Information -->
		<fieldset class="step active-step">
			<legend>Step 1: Basic Info</legend>
			<div class="mb-3">
				<label for="title" class="form-label">Title:</label>
				<input
					type="text"
					name="hostel[title]"
					id="title"
					class="form-control"
					required
				/>
			</div>
			<div class="mb-3">
				<label for="description" class="form-label">Description:</label>
				<textarea
					name="hostel[description]"
					id="description"
					class="form-control"
					required
				></textarea>
			</div>
			<button type="button" class="btn btn-primary next-step">Next</button>
		</fieldset>

		<!-- Step 2: Pricing & Location -->
		<fieldset class="step">
			<legend>Step 2: Pricing & Location</legend>
			<div class="row">
				<div class="mb-3 col-md-4">
					<label for="price" class="form-label">Price per night:</label>
					<input
						type="number"
						name="hostel[price]"
						id="price"
						class="form-control"
						required
					/>
				</div>
				<div class="mb-3 col-md-8">
					<label for="country" class="form-label">Country:</label>
					<input
						type="text"
						name="hostel[country]"
						id="country"
						class="form-control"
						required
					/>
				</div>
			</div>
			<div class="mb-3">
				<label for="location" class="form-label">Full Address:</label>
				<input
					type="text"
					name="hostel[location]"
					id="location"
					class="form-control"
					required
				/>
			</div>
			<button type="button" class="btn btn-secondary prev-step">Back</button>
			<button type="button" class="btn btn-primary next-step">Next</button>
		</fieldset>

		<!-- Step 3: Upload Images -->
		<fieldset class="step">
			<legend>Step 3: Upload Images</legend>
			<div class="mb-3">
				<label for="images" class="form-label">Upload Images:</label>
				<input
					type="file"
					class="form-control"
					name="hostel[images]"
					id="images"
					multiple
					required
				/>
			</div>
			<button type="button" class="btn btn-secondary prev-step">Back</button>
			<button type="button" class="btn btn-primary next-step">Next</button>
		</fieldset>

		<!-- Step 4: Select Amenities -->
		<fieldset class="step">
			<legend>Step 4: Select Amenities</legend>
			<% for (const category in amenities) { %>
			<h6><%= category %></h6>
			<ul class="list-unstyled d-flex flex-wrap">
				<% amenities[category].forEach(amenity => { %>
				<li class="d-flex align-items-center p-2">
					<input
						type="checkbox"
						class="btn-check"
						id="<%= amenity.name.replace(/\s+/g, '-') %>"
						name="hostel[amenities]"
						value="<%= amenity.name %>"
						autocomplete="off"
					/>
					<label
						class="btn btn-outline-dark p-3"
						for="<%= amenity.name.replace(/\s+/g, '-') %>"
					>
						<span class="me-2"><%- amenity.icon %></span> <%= amenity.name %>
					</label>
				</li>
				<% }); %>
			</ul>
			<% } %>

			<button type="button" class="btn btn-secondary prev-step">Back</button>
			<button type="submit" class="btn btn-success">Submit</button>
		</fieldset>
	</form>
</div>

<!-- Multi-Step Form Script -->
<script src="/js/multiStepForm.js"></script>
